(function(e){e.fn.forthebirds=function(t){function g(e){var t=new Date,n=new Date(e);navigator.appVersion.indexOf("MSIE")!==-1&&(n=Date.parse(e.replace(/( \+)/," UTC$1")));var r=t-n,i=1e3,s=i*60,o=s*60,u=o*24,a=u*7;return isNaN(r)||r<0?"":r<i*2?"right now":r<s?Math.floor(r/i)+" seconds ago":r<s*2?"about 1 minute ago":r<o?Math.floor(r/s)+" minutes ago":r<o*2?"about 1 hour ago":r<u?Math.floor(r/o)+" hours ago":r>u&&r<u*2?"yesterday":r<u*365?Math.floor(r/u)+" days ago":"over a year ago"}function y(){console.log("Something Went Wrong. Check your dependancies.")}function b(){if(m.fetch=="1")return;m.fetch==m.count&&h--;if(m.transition==="fade")e("ul.ftb").animate({opacity:"0"},function(){e("ul.ftb").animate({"margin-left":"-"+h*f+"px"},200,function(){e("ul.ftb").animate({opacity:"1"})})});else if(m.transition==="slideup"){e("li.ftb").css("float","none");if(d===0){c=e("ul.ftb li.ftb:eq(0)").height()- -e("li.ftb").css("padding-bottom").replace("px","");d=1}e("ul.ftb").animate({"margin-top":""+ -c*h+"px"})}else e("ul.ftb").animate({"margin-left":h*f+"px"});h>=p-1&&(h=-1);if(m.date!="false"){m.datelocation!=null?e(".datestamp").animate({opacity:"0"},function(){e(".datestamp").html(g(o[v]));e(".datestamp").animate({opacity:"1"})}):e(".datestamp").animate({opacity:"0"},function(){e(".datestamp").html(g(o[v]));e(".datestamp").animate({opacity:"1"})});v++;v==o.length&&(v=0)}h++}function w(){f=e("ul.ftb").css("width").replace("px","")- -e("li.ftb").css("padding-right").replace("px","");l=f*parseInt(m.fetch);e("ul.ftb").css("width",l+"px");e(".insertftb").fadeIn();if(m.date!="false")if(m.datelocation==null){e(n).append('<div class="datestamp"></div>');e(".datestamp").animate({opacity:"0"},function(){e(".datestamp").html(g(o[v]));e(".datestamp").animate({opacity:"1"})})}else{e("."+m.datelocation).append('<div class="datestamp"></div>');e(".datestamp").animate({opacity:"0"},function(){e(".datestamp").html(g(o[v]));e(".datestamp").animate({opacity:"1"})})}var t=window.setInterval(b,parseInt(m.timer))}function E(t){var r=e.parseJSON(t),i=1;if(m.date!="false")if(m.avatar!="false"){var s=r.length-2;o=r[r.length-2]}else{var s=r.length-1;o=r[r.length-1]}else var s=r.length;for(var f=0;f<s;f++)if(f<parseInt(m.fetch)){if(parseInt(m.count)===1||parseInt(m.count)===null)if(f===0){p++;a='<ul class="ftb pane"><li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li>"}else if(f==parseInt(m.fetch)-1){p++;a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li></ul>"}else{p++;a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li>"}else if(i==1)if(f===0){p++;a='<ul class="ftb pane"><li class="ftb slide"><ul><li><div class="ftb tweet">'+r[f]+"</div></li>"+m.divider}else if(f===parseInt(m.fetch)-1)a=a+'<li class="ftb slide"><ul><li><div class="ftb tweet">'+r[f]+"</div></li></ul></li></ul>";else{p++;a=a+'<li class="ftb slide"><ul><li><div class="ftb tweet">'+r[f]+"</div></li>"+m.divider}else if(i===parseInt(m.count))if(f===parseInt(m.fetch)-1)a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li></ul></li></ul>";else{a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li></ul>";i=0}else f===parseInt(m.fetch)-1?a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li></ul></li></ul>":a=a+'<li class="ftb slide"><div class="ftb tweet">'+r[f]+"</div></li>"+m.divider;i++}m.date!="false"?m.avatar!="false"?u=r[r.length-1]:u="":u=r[r.length-1];n.html('<div style="display: none;" class="insertftb"></div>');m.avatarlocation===null?e(".insertftb").append(u):e("."+m.avatarlocation).html(u);e(".insertftb").append(a);w()}var n=e(this),r,i=new Array,s=new Array,o=new Array,u=null,a=null,f=null,l=null,c=null,h=1,p=0,d=0,v=0,m=e.extend({user:"trakout",fetch:"5",count:"1",avatar:"false",avatarlocation:null,divider:"<hr />",loadtext:null,transition:"slide",timer:"4000",date:"false",datelocation:null},t);e(this).html(m.loadtext);e.ajax({url:ajaxUrl+"/js/php/twitteroauth/forthebirds.php",type:"get",data:{user:m.user,fetch:m.fetch,avatar:m.avatar,date:m.date},error:y,success:function(e){E(e)}})}})(jQuery);